 

## 复制文件命令 `cp`

主要要注意：如果想要在复制文件时，保持文件的权限也同时复制。

```shell
# 文件复制
cp abc.text abc_2.text -a # 这样能保证文件权限也进行复制

# 文件夹复制
cp abc cdf -a # 这样能保证文件夹复制时，权限也进行复制。

# 在复制时，权限会发生变化的，主要是针对other的权限。
```





## 文件权限命令 `chmod`

`chmod` 有两种方式修改文件的权限：

- 字母法

  角色说明：

  | 角色 | 描述                     |
  | :--: | :----------------------- |
  |  u   | user, 表示该文件的所有者 |
  |  g   | group, 表示用户组        |
  |  o   | other, 表示其他用户      |
  |  a   | all, 表示所有用户        |

  权限设置说明：

  | 操作符 | 描述     |
  | :----: | -------- |
  |   +    | 增加权限 |
  |   -    | 撤销权限 |
  |   =    | 设置权限 |

  权限说明：

  | 权限 | 描述       |
  | :--: | ---------- |
  |  r   | 可读       |
  |  w   | 可写       |
  |  x   | 可执行     |
  |  -   | 无任何权限 |

  ```shell
  chmod u+rwx abc.txt
  chmod u-x abc.txt
  chmod u=rw,g=r,o=r abc.txt
  ```

  

- 数字法

  权限说明

  | 权限 | 描述                        |
  | :--: | --------------------------- |
  |  r   | 可读，对应的权限值是4       |
  |  w   | 可写，对应的权限值是2       |
  |  x   | 可执行，对应的权限值是1     |
  |  -   | 无任何权限，对应的权限值是0 |

  ```shell
  chmod 666 abc.txt # 表示u,g,o对abc.txt文件的权限都是可读可写
  chmod 744 abc.txt # 表示u对abc.txt是可读、可写、可执行，g和o对文件的权限是可读
  ```

  3个数字分别表示的意思：

  第1个数字代表：user对文件的RWX权限的和。

  第2个数字代表：group对文件的RWX权限的和。

  第3个数字代表：other对文件的RWX权限的和。



## 创建用户`useradd`

在系统中创建添加用户， 普遍用户是没有权限去给系统添加用户的，需要具有管理员权限才可以。

选项说明：

- -c<备注> 　加上备注文字。备注文字会保存在passwd的备注栏位中。
- -d<登入目录> 　指定用户登入时的起始目录。
- -D 　变更预设值．
- -e<有效期限> 　指定帐号的有效期限。
- -f<缓冲天数> 　指定在密码过期后多少天即关闭该帐号。
- -g<群组> 　指定用户所属的群组。  **每一个用户只有一个用户组（主组）。**
- -G<群组> 　指定用户所属的附加群组。  **一个用户可以有多个附加组。**
- -m 　自动建立用户的登入目录。
- -M 　不要自动建立用户的登入目录。
- -n 　取消建立以用户名称为名的群组．
- -r 　建立系统帐号。
- -s<shell>　 　指定用户登入后所使用的shell。
- -u<uid> 　指定用户ID。

```shell
sudo useradd -m test # 表示创建一个用户test,并同时创建用户主目录，名字为“test”，在/home/ 目录下会看到
sudo useradd -g groupname test #创建test用户，并同时添加到groupname的组中

sudo passwd test # 创建完之后，一定要给新的用户设置录入密码。
```



使用 `useradd` 指令所建立的帐号，实际上是保存在 **/etc/passwd** 文本文件中。 

查看用户是否创建成功：

```shell
cat /etc/passwd 
```

查看用户组是否创建成功：

```shell
cat /etc/group
```

也可以通过 `id` 命令查看用户信息：

```shell
id test
```



## 删除用户命令 `userdel`

```shell
sudo userdel -r test # 删除用户，默认也会删除同名的用户组，用户主目录也会删除
```





## 修改用户信息命令`usermod`

用来修改系统中已有用户的信息。

选项说明：

- -c<备注> 　修改用户帐号的备注文字。
- -d登入目录> 　修改用户登入时的目录。
- -e<有效期限> 　修改帐号的有效期限。
- -f<缓冲天数> 　修改在密码过期后多少天即关闭该帐号。
- -g<群组> 　修改用户所属的群组。 **每一个用户只有一个用户组（主组）。**
- -G<群组> 　修改用户所属的附加群组。 **一个用户可以有多个附加组。**
- -l<帐号名称> 　修改用户帐号名称。
- -L 　锁定用户密码，使密码无效。
- -s<shell> 　修改用户登入后所使用的shell。
- -u<uid> 　修改用户ID。
- -U 　解除密码锁定。

```shell
# 这个命令可以添加一个用户到指定的组，但是以前添加的组就会清空掉。
# 如果想要添加一个用户到一个组，同时保留以前添加的组时，使用 gpasswd 
sudo usermod -G sudo test #给用户test添加一个附加组sudo.
id test # 查看用户的信息
```



## 用户添加到组或者从组中删除命令 `gpasswd`

用于将一个用户添加到组或者从组中删除

选项参数：

- -a：添加用户到组；
- -d：从组删除用户；
- -A：指定管理员；
- -M：指定组成员和-A的用途差不多；
- -r：删除密码；
- -R：限制用户登入组，只有组中的成员才可以用newgrp加入该组。

```shell
sudo gpasswd -d test sudo # 表示将test用户从sudo组中删除
sudo gpasswd -a test sudo # 表示将test用户添加到sudo组中，原来已有的附加组不会清空 
```



## 创建用户组命令 `groupadd`

```shell
sudo groupadd testgroup # 创建testgroup组
```



## 删除用户组命令 `groupdel`

```shell
sudo groupdel testgroup # 删除用户组testgroup,
# 如果一个用户组下有用户，则需要先把用户从组中移除，再才能删除用户组。
```





## 获取管理员权限命令 `sudo`

1. 直接切换到管理员root用户下:

   ```shell
   sudo -s #直接切换到root
   ```

   退出root用户：

   ```shell
   exit; #即可退出root，回到之前的用户
   ```

   

2. 执行单个命令时，使用管理员权限执行：

   ```shell
   sudo touch abc.txt # 表示通过root权限创建一个abc.txt的文件
   ```

   

## 切换用户命令`su`

```shell
su - test  # 表示切换到test用户
```





## `which ` 命令

`which` 命令可以用来查看一个执行命令的路径：

```sh
which python3  # 表示python3可执行文件在系统中的位置  如：/usr/bin/python3
which chmod # /bin/chmod
```



##  `whoami`

查看当前用户是谁



## `who` 命令

查看当前系统有哪些用户在登录



## `passwd` 命令

修改当前用户的密码